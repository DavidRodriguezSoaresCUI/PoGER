[EVENT]
xy=[7, 4]
graphic="NPC 18"

[PAGE]



if C is :OFF
  Show Text "\\bHello! I'm Kurt!"
  Show Text "\\bI specialise in turning Apricorns into Poké Balls."
  Show Text "\\bIf you like, I can convert one of yours into a Poké Ball."
  :C = :ON
Else
  Show Text "\\bHello again."
Show Text "\\bDo you have an Apricorn for me?"
Show Choices choices=['Yes', 'No'], default=2
When 'Yes'
  Show Text "\\bWhich Apricorn would you like me to convert?"
  s:pbChooseApricorn(8)
  if :Apricornbeingconverted == 0
    # Player didn't choose an Apricorn.
    Show Text "\\bLet me know when you want me to convert an Apricorn for you."
  Else
    # Player chose an Apricorn.
    s:$PokemonBag.pbDeleteItem(pbGet(8))
    s:pbSet(3,PBItems.getName(pbGet(8)))
    Show Text "\\bOkay. I'll turn your \\v[3] into a Poké Ball for you."
    Show Text "\\bI should be finished by tomorrow."
    # Convert Apricorn into Ball now.
    s:pbConvertItemToItem(8,[ :REDAPRICORN,:LEVELBALL, :YLWAPRICORN,:MOONBALL, :BLUAPRICORN,:LUREBALL, :GRNAPRICORN,:FRIENDBALL, :PNKAPRICORN,:LOVEBALL, :WHTAPRICORN,:FASTBALL, :BLKAPRICORN,:HEAVYBALL])"
    s:pbSetEventTime
  
When 'No'
  # Player doesn't want to choose an Apricorn.
  Show Text "\\bCome back when you have an Apricorn for me."
[end]


[PAGE]

:B == :ON

if :Apricornbeingconverted > 0
  Show Text "\\bI've been waiting for you. I've completed the Poké Ball you asked me to make."
  if s:Kernel.pbReceiveItem(pbGet(8))
    :Apricornbeingconverted = 0
    :B = :OFF
  Else
    Show Text "\\bYou have no room left. Make room, then come see me."
  
Else
  Show Text "\\bI tried making a Poké Ball out of what you gave me, but it didn't work."
  Show Text "\\bSorry."
  :B = :OFF
[end]


[PAGE]

:A == :ON

Show Text "\\bI'm still working on your Apricorn. Come back later."
[end]


[PAGE]
trigger=onAutorun
s:cooledDown?(86400) == :ON

:A = :OFF
:B = :ON
s:setTempSwitchOn("A")
[end]

