[EVENT]
xy=[9, 2]
graphic="NPC 23"

[PAGE]



Show Text "\\rThis is the Pokémon Lottery Corner. I'm Felicity, your attendant today."
Show Text "\\rIf the drawn number matches the ID No. of any of your Pokémon, you could win fabulous gifts."
Show Text "\\rWould you like to check today's lucky number?"
Show Choices choices=['Yes', 'No'], default=2
When 'Yes'
  Show Text "\\rFirst, I'll look up today's Pokémon Lottery Corner lucky number."
  Show Text "..."
  s:pbSetLotteryNumber(1)
  Show Text "\\rYour Loto Ticket number is \\v[1]."
  Show Text "\\rNow, let's see if it matches the ID No. of any of your Pokémon."
  s:pbLottery(pbGet(1),2,3,4)
  if :TempMoveName == 0
    Show Text "\\rI'm sorry. You didn't get a match..."
    Show Text "\\rPlease do visit again."
  Else
    if :TempPokemonName == 1
      Show Text "\\rCongratulations!"
      Show Text "\\rThe ID number of your team's \\v[2] matches your Loto Ticket number!"
    Else
      Show Text "\\rCongratulations!"
      Show Text "\\rThe ID number of your PC-boxed \\v[2] matches your Loto Ticket number!"
    
    if :TempMoveName == 5
      Show Text "\\rOh my goodness, all five digits matched!"
      Show Text "\\rYou've won the jackpot prize!"
      if s:Kernel.pbReceiveItem(:MASTERBALL)
        Show Text "\\rPlease do visit again! Good-bye from Felicity, your attendant!"
        s:pbSetEventTime
      Else
        Show Text "\\rYou have no room left. Make room, then come see me."
        s:setVariable(PBItems::MASTERBALL)
        :B = :ON
      
    
    if :TempMoveName == 4
      Show Text "\\rThe last four digits matched, so you win the first prize!"
      if s:Kernel.pbReceiveItem(:MAXREVIVE)
        Show Text "\\rPlease do visit again! Good-bye from Felicity, your attendant!"
        s:pbSetEventTime
      Else
        Show Text "\\rYou have no room left. Make room, then come see me."
        s:setVariable(PBItems::MAXREVIVE)
        :B = :ON
      
    
    if :TempMoveName == 3
      Show Text "\\rThe last three digits matched, so you win the second prize!"
      if s:Kernel.pbReceiveItem(:EXPSHARE)
        Show Text "\\rPlease do visit again! Good-bye from Felicity, your attendant!"
        s:pbSetEventTime
      Else
        Show Text "\\rYou have no room left. Make room, then come see me."
        s:setVariable(PBItems::EXPSHARE)
        :B = :ON
      
    
    if :TempMoveName == 2
      Show Text "\\rThe last two digits matched, so you win the third prize!"
      if s:Kernel.pbReceiveItem(:PPUP)
        Show Text "\\rPlease do visit again! Good-bye from Felicity, your attendant!"
        s:pbSetEventTime
      Else
        Show Text "\\rYou have no room left. Make room, then come see me."
        s:setVariable(PBItems::PPUP)
        :B = :ON
      
    
    if :TempMoveName == 1
      Show Text "\\rThe last digit matched, so you win the fourth prize!"
      if s:Kernel.pbReceiveItem(:ULTRABALL)
        Show Text "\\rPlease do visit again! Good-bye from Felicity, your attendant!"
        s:pbSetEventTime
      Else
        Show Text "\\rYou have no room left. Make room, then come see me."
        s:setVariable(PBItems::ULTRABALL)
        :B = :ON
      
    
  
When 'No'
  Show Text "\\rOh, I see.\\nPlease do visit us again."
[end]


[PAGE]

:A == :ON

Show Text "\\rYou've already drawn a Loto Ticket today. Please come back tomorrow."
[end]


[PAGE]
trigger=onAutorun
s:cooledDownDays?(1) == :ON:A == :ON

:A = :OFF
s:setTempSwitchOn("A")
[end]


[PAGE]

:B == :ON

Show Text "\\rI've been waiting for you. Here's the item you won."
if s:Kernel.pbReceiveItem(getVariable())
  :B = :OFF
  s:pbSetEventTime
Else
  Show Text "\\rYou have no room left. Make room, then come see me."
[end]

