[EVENT]
xy=[7, 3]
graphic="NPC 07"
direction=W

[PAGE]
trigger=onEventTouch


Show Text "\\bWelcome to the Safari Zone!"
Set Move Route :player
  Turn E
Show Text "\\G\\bFor just $500, you can play the Safari Game."
Show Text "\\G\\bYou can roam the wide-open safari and catch what you like."
Show Text "\\G\\bWould you like to play?"
Show Choices choices=['Yes', 'No'], default=2
When 'Yes'
  if s:pbBoxesFull?
    Show Text "\\G\\bSorry, your PC boxes are full."
    Set Move Route :player
      Step S
    
    End Execution
  
  if :Gold <= 499
    Show Text "\\G\\bOops!\\nNot enough money!"
    Show Text "\\G\\bCome again."
    Set Move Route :player
      Step S
    
    End Execution
  Else
    :Gold -= 500
    Show Text "\\G\\bThat'll be $500, please!"
    Show Text "\\G\\bWe only use a special kind of PokÃ© Ball here."
    Show Text "\\G\\PN received 30 Safari Balls from the attendant. \\me[Item get]\\wtnp[20]"
    Show Text "\\G\\bWe'll call you on the PA when you run out of time or Safari Balls."
    Show Text "\\G\\bWell, I'll wish you the best of luck!"
    if s:$game_player.x==3
      Set Move Route :player
        Turn N
        Step N
        Step E
        Step N
        Set property=opacity value={opa}
    Else
      if s:$game_player.x==5
        Set Move Route :player
          Turn N
          Step N
          Step W
          Step N
          Set property=opacity value={opa}
      Else
        Set Move Route :player
          Turn N
          Step N
          Step N
          Set property=opacity value={opa}
      
    
    
    s:pbSafariState.pbStart(30)
    Play SE="Door exit", volume=80, pitch=100
    Fadeout color=Black, ms=300
    Wait ms=400
    Set Move Route :player
      Set property=opacity value={opa}
    Transfer Player map=68, x=25, y=27, direction="K", fading="NoFading"
    Fadein ms=300
    End Execution
  
When 'No'
  Show Text "\\G\\bOkay.\\nPlease come again!"
  Set Move Route :player
    Step S
[end]


[PAGE]
trigger=onAutorun
s:pbInSafari? == :ON

Set Move Route :player
  Step S
if s:pbSafariState.decision==0
  Show Text "\\bAre you going to leave the Safari Zone early?"
  Show Choices choices=['Yes', 'No'], default=2
  When 'Yes'
    Show Text "\\bPlease return any Safari Balls you may have left."
    s:pbSafariState.pbEnd
    Set Move Route :player
      Step S
      Step S
    
    End Execution
  When 'No'
    Show Text "\\bGood luck!"
    Set Move Route :player
      Step N
      Set property=opacity value={opa}
    
    Play SE="Door exit", volume=80, pitch=100
    Fadeout color=Black, ms=300
    Wait ms=400
    Set Move Route :player
      Set property=opacity value={opa}
    Transfer Player map=68, x=25, y=27, direction="K", fading="NoFading"
    Fadein ms=300
    End Execution
if s:pbSafariState.decision==1
  Show Text "\\bDid you catch your fair share? Come again!"
  s:pbSafariState.pbEnd
  Set Move Route :player
    Step S
    Step S
  
[end]

