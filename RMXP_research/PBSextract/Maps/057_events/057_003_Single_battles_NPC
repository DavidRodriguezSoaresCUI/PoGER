[EVENT]
xy=[2, 3]
graphic="NPC 23"

[PAGE]



Show Text "\\rWelcome to the Battle Tower's Stadium Cup Division."
Show Text "\\rWould you like to participate in a single battle?"
Show Choices choices=['Yes', 'No'], default=2
When 'Yes'
  Show Text "\\rWhich Stadium Cup would you like to enter?\\ch[1,5, Pika Cup,Fancy Cup,Poké Cup,Little Cup,Cancel]"
  if :TempPokemonChoice == 0
    s:pbBattleChallenge.set("pikacupsingle",7, pbPikaCupRules(false))"
    if s:!pbHasEligible?(3,100)
      Show Text "\\rSorry, you can't participate. You need three different Pokémon level 15 to 20 to enter."
      Show Text "\\rThey must be of a different species and hold different items."
      Show Text "\\rCertain exotic species, as well as eggs, are ineligible."
      Goto End
    
  
  if :TempPokemonChoice == 1
    s:pbBattleChallenge.set("fancycupsingle",7, pbFancyCupRules(false))"
    if s:!pbHasEligible?(3,100)
      Show Text "\\rSorry, you can't participate. You need three different Pokémon level 25 to 30 to enter."
      Show Text "\\rThey must be of a different species and hold different items."
      Show Text "\\rThey also must be baby Pokémon, and can't be too tall or too heavy."
      Show Text "\\rEggs are ineligible."
      Goto End
    
  
  if :TempPokemonChoice == 2
    s:pbBattleChallenge.set("pokecupsingle",7, pbPokeCupRules(false))"
    if s:!pbHasEligible?(3,100)
      Show Text "\\rSorry, you can't participate. You need three different Pokémon level 50 to 55 to enter."
      Show Text "\\rThey must be of a different species and hold different items."
      Show Text "\\rCertain exotic species, as well as eggs, are ineligible."
      Goto End
    
  
  if :TempPokemonChoice == 3
    s:pbBattleChallenge.set("littlecupsingle",7, pbLittleCupRules(false))"
    if s:!pbHasEligible?(3,100)
      Show Text "\\rSorry, you can't participate. You need three different baby Pokémon at level 5 to enter."
      Show Text "\\rThey must be of a different species and hold different items."
      Show Text "\\rThey also must be baby Pokémon that are capable of evolving."
      Show Text "\\rEggs are ineligible."
      Goto End
    
  
  if :TempPokemonChoice == 4
    Goto End
  
  Show Text "\\rPlease choose the Pokémon that will enter."
  if s:!pbEntryScreen
    Goto End
  
  if s:pbSaveScreen
    Show Text "\\rPlease come this way."
    s:pbBattleChallenge.start
    Set Move Route :self
      Set property=through value=:ON
      Wait s=4
      Turn N
      Step N
      Set property=through value=:OFF
    Set Move Route :player
      Set property=through value=:ON
      Wait s=4
      Turn N
      Step N
      Set property=through value=:OFF
    
    Set Move Route 8
      Play SE="Door enter", volume=100, pitch=100
      Wait s=2
      Turn W
      Wait s=2
      Turn E
      Wait s=2
      Turn N
      Wait s=2
    
    Set Move Route :self
      Set property=through value=:ON
      Step N
      Set property=opacity value={opa}
      Set property=through value=:OFF
    Set Move Route :player
      Set property=through value=:ON
      Wait s=4
      Step N
      Step N
      Set property=opacity value={opa}
      Set property=through value=:OFF
    
    Set property=transparent value=:ON
    Set Move Route 8
      Wait s=2
      Turn E
      Wait s=2
      Turn W
      Wait s=2
      Turn S
      Wait s=2
    
    Fadeout color=Black, ms=300
    Wait ms=400
    Set property=transparent value=:OFF
    Transfer Player map=56, x=0, y=6, direction="E", fading="NoFading"
    Fadein ms=300
  Else
    Goto End
  
When 'No'
  Label End
  Show Text "\\rCome back another time."
  s:pbBattleChallenge.pbCancel
  End Execution
[end]


[PAGE]
trigger=onAutorun
s:pbInChallenge? == :ON

# If Won
if s:pbBattleChallenge.decision==1
  Show Text "\\rCongratulations for winning."
  Show Text "\\rPlease take this prize."
  if s:!Kernel.pbReceiveItem(:RARECANDY)
    Show Text "\\rYou have no room for it. At least you won, though."
  
  if s:$PokemonTemp.lastbattle!=nil
    Show Text "\\rWould you like to record your last battle?"
    Show Choices choices=['Yes', 'No'], default=2
    When 'Yes'
      s:pbRecordLastBattle
      Show Text "\\se[Pkmn exp full]The battle was recorded."
    When 'No'
  
  Show Text "Your results will be recorded.\\wtnp[15]"
  s:pbBattleChallenge.pbEnd
  Show Text "\\rCome back another time."
  End Execution
# If Lost or Forfeited
if s:pbBattleChallenge.decision==2
  Show Text "\\rThanks for playing."
  if s:$PokemonTemp.lastbattle!=nil
    Show Text "\\rWould you like to record your last battle?"
    Show Choices choices=['Yes', 'No'], default=2
    When 'Yes'
      s:pbRecordLastBattle
      Show Text "\\se[Pkmn exp full]The battle was recorded."
    When 'No'
  
  Show Text "Your results will be recorded.\\wtnp[15]"
  s:pbBattleChallenge.pbEnd
  Show Text "\\rCome back another time."
  End Execution
if s:pbBattleChallenge.pbResting?
  Show Text "\\rWe've been waiting for you. Please come this way."
  s:pbBattleChallenge.pbGoOn
  Set Move Route :self
    Set property=through value=:ON
    Wait s=4
    Turn N
    Step N
    Set property=through value=:OFF
  Set Move Route :player
    Set property=through value=:ON
    Wait s=4
    Turn N
    Step N
    Set property=through value=:OFF
  
  Set Move Route 8
    Play SE="Door enter", volume=100, pitch=100
    Wait s=2
    Turn W
    Wait s=2
    Turn E
    Wait s=2
    Turn N
    Wait s=2
  
  Set Move Route :self
    Set property=through value=:ON
    Step N
    Set property=opacity value={opa}
    Set property=through value=:OFF
  Set Move Route :player
    Set property=through value=:ON
    Wait s=4
    Step N
    Step N
    Set property=opacity value={opa}
    Set property=through value=:OFF
  
  Set property=transparent value=:ON
  Set Move Route 8
    Wait s=2
    Turn E
    Wait s=2
    Turn W
    Wait s=2
    Turn S
    Wait s=2
  
  Fadeout color=Black, ms=300
  Wait ms=400
  Set property=transparent value=:OFF
  Transfer Player map=56, x=0, y=6, direction="E", fading="NoFading"
  Fadein ms=300
Else
  Show Text "\\rExcuse me, but you didn't save before finishing your challenge last time."
  Show Text "\\rSorry, but your challenge has been canceled."
  s:pbBattleChallenge.pbEnd
[end]

