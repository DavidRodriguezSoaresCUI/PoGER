[EVENT]
xy=[10, 7]
graphic="NPC 10"

[PAGE]



Show Text "\\bHello, hello!\\nI am the official Name Rater!"
Show Text "\\bWant me to rate the nicknames of your Pokémon?"
Show Choices choices=['Yes', 'No'], default=2
When 'Yes'
  Show Text "\\bWhich Pokémon's nickname should I critique?"
  # Opens a screen for choosing a Pokémon.  The index
  # is stored in variable 1, the name in variable 3.
  s:pbChoosePokemon(1,3)
  # If variable 1 is less than 0, it means the player has
  # canceled choosing a Pokémon.
  if :TempPokemonChoice < 0
    Show Text "\\bI see.\\nDo come visit again."
    End Execution
  
  # Check for eggs.
  if s:pbGetPokemon(1).isEgg?
    Show Text "\\bNow, now... That is merely an Egg!"
    End Execution
  
  # Check for Shadow Pokémon.
  if s:(pbGetPokemon(1).isShadow? rescue false)
    Show Text "\\bI wouldn't dare critique a Shadow Pokémon's name!"
    End Execution
  
  if s:pbGetPokemon(1).isForeign?($Trainer)
    Show Text "\\bHmmm... \\v[3] it is!"
    Show Text "\\bThis is a magnificent nickname! It is impeccably beyond reproach!"
    Show Text "\\bYou'll do well to cherish your \\v[3] now and beyond."
    End Execution
  
  Show Text "\\b\\v[3], is it?\\nThat is a decent nickname!"
  Show Text "\\bBut, would you like me to give it a nicer name?"
  Show Text "\\bHow about it?"
  Show Choices choices=['Yes', 'No'], default=2
  When 'Yes'
    Show Text "\\bAh, good. Then, what shall the new nickname be?"
    s:pkmn=pbGetPokemon(1) species=PBSpecies.getName(pkmn.species) pbTextEntry(#{species}'s nickname?,0,10,5)"
    if s:pbGet(5)=="" || pbGet(5)==pbGet(3)
      # Resets the Pokémon's nickname to the species name.
      s:pkmn=pbGetPokemon(1) pkmn.name=PBSpecies.getName( pkmn.species) pbSet(3,pkmn.name)"
      Show Text "\\bDone! From now on, this Pokémon shall be known as \\v[3]!"
      Show Text "\\bIt looks no different from before, and yet, this is vastly superior!"
      Show Text "\\bHow fortunate for you!"
    Else
      # Retrieves the Pokémon indexed at variable 1 and
      # changes its name to variable 5.
      s:pkmn=pbGetPokemon(1) pkmn.name=pbGet(5)"
      Show Text "\\bDone! From now on, this Pokémon shall be known as \\v[5]!"
      Show Text "\\bIt is a better name than before!\\nHow fortunate for you!"
    
  When 'No'
    Show Text "\\bI see.\\nDo come visit again."
When 'No'
  Show Text "\\bI see.\\nDo come visit again."
[end]

